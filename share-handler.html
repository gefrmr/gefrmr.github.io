<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Chunks Share Handler</title>
</head>
<body>
  <p>Bezig met verwerkenâ€¦</p>

  <script>
    async function handleShare() {
      const formData = await new Response(await fetch(window.location.href, { method: "POST" })).formData();

      const text = formData.get("text") || "";
      const url  = formData.get("url")  || "";

      await fetch("https://script.google.com/macros/s/AKfycbwiwLAf07rIVLd7MQN-zg5mNj8xQ7cQtsq8z8r8fo90yrPVPWByuC2F6OB43ebu5ovv/exec", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: "text=" + encodeURIComponent(text) +
              "&url="  + encodeURIComponent(url)
      });

      document.body.innerHTML = "<h2>Toegevoegd!</h2>";
    }

    handleShare();
  </script>
</body>
</html>
